import unittest
from main import send_to_iothub  # Import the method you want to test

class TestSendToIoTHub(unittest.TestCase):
    
    def test_send_to_iothub_successful(self):
        # Arrange
        # Define the necessary data for testing
        data = {"properties": {"key1": "value1"}}
        
        # Act
        try:
            send_to_iothub(data)
            
            # Assert
            # Add assertions to check if the expected behavior occurred
            self.assertTrue(True)  # Add your assertions here
        except Exception as e:
            self.fail("Exception occurred: " + str(e))

    def test_send_to_iothub_with_exception(self):
        # Arrange
        # Define the necessary data for testing
        data = {"properties": {"key1": "value1"}}
        
        # Act
        try:
            # Simulate an exception by providing an incorrect CONNECTION_STRING
            incorrect_connection_string = "InvalidConnectionString"
            send_to_iothub(data, connection_string=incorrect_connection_string)
            
            # Assert
            # You can add assertions to check for expected error handling behavior
            self.fail("Exception should have been raised.")
        except Exception as e:
            self.assertIsInstance(e, Exception)  # Add your assertions here

if __name__ == '__main__':
    unittest.main()
