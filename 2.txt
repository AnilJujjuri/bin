from pymodbus.client import ModbusTcpClient

def initialize_modbus_client():
    # Provide the IP address and port of the Modbus server
    server_ip = '3.86.56.32'
    server_port = 2109

    # Create and return a Modbus client instance
    client = ModbusTcpClient(server_ip, port=server_port)
    client.connect()
    return client

if __name__ == "__main__":
    client = initialize_modbus_client()
    print("Client Connected!")

    try:
        while True:
            collect_and_send_data(client)
    except KeyboardInterrupt:
        print("Simulation stopped.")
