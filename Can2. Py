from azure.iot.device import IoTHubDeviceClient

# Azure IoT Hub connection string
device_connection_string = "HostName=your_iothub_hostname;DeviceId=your_device_id;SharedAccessKey=your_shared_access_key"

# Create the IoT Hub device client
client = IoTHubDeviceClient.create_from_connection_string(device_connection_string)

# Connect to the IoT Hub
client.connect()

# Get the device twin
twin = client.get_twin()

# Retrieve the desired properties from the twin
desired_properties = twin["properties"]["desired"]

# Process the desired properties
for key, value in desired_properties.items():
    print("Key:", key)
    print("Value:", value)

# Disconnect from the IoT Hub
client.disconnect()
