from azure.iot.device import IoTHubDeviceClient

def update_device_twin(device_connection_string, properties):
    reported_properties = {
        "reported":
           properties
        
    }
    client = IoTHubDeviceClient.create_from_connection_string(device_connection_string)
    client.connect()

    client.patch_twin_reported_properties(reported_properties)

    

if __name__ == '__main__':
    device_connection_string = "HostName=EDGTneerTrainingPractice.azure-devices.net;DeviceId=nodered;SharedAccessKey=mOeGufRBpvjmFut51ghJ0gjmWZDR8BHN1WWJtdsrBY4="
    #sensor_id value should begit  unique
    can_device_id = "187"
    #As per the requiremnts need to give our desired properties
    properties = {
        
        "vibration": 2.0,  
        "temperature": 32.0,  
        "humidity": 87.0,
        "moisture":7.9,
        "can_device_id": can_device_id,
    }

    update_device_twin(device_connection_string, properties)

