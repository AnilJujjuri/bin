from azure.iot.device import IoTHubModuleClient

def refresh_module_twin(client):
    try:
        # Clear the twin cache
        client._twin_cache.clear()
        
        # Fetch the updated twin
        twin = client.get_twin()
        return twin
    except Exception as e:
        print("Error fetching module twin:", e)

if __name__ == "__main__":
    client = IoTHubModuleClient.create_from_edge_environment()
    updated_twin = refresh_module_twin(client)
    print("Updated Module Twin:", updated_twin)
