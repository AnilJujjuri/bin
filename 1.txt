from azure.iot.device import IoTHubDeviceClient

def send_telemetry_data(device_connection_string, telemetry_data):
    client = IoTHubDeviceClient.create_from_connection_string(device_connection_string)
    client.connect()

    reported_properties = {
        "reported": {
            "can_device_id": "device_id",
            "telemetry_data": telemetry_data
        }
    }
    client.patch_twin_reported_properties(reported_properties)

    client.disconnect()

# Example telemetry data
telemetry_data = {
    "temperature": 25.5,
    "pressure": 10.2,
    "speed": 55,
    "status": "OK"
}

# Example connection string
device_connection_string = "HostName=EDGTneerTrainingPractice.azure-devices.net;DeviceId=nodered;SharedAccessKey=mOeGufRBpvjmFut51ghJ0gjmWZDR8BHN1WWJtdsrBY4="

# Call the function to send telemetry data
send_telemetry_data(device_connection_string, telemetry_data)
